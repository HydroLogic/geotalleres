
<!DOCTYPE html>


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Optimización de GeoTIFF para su publicación &mdash; geotalleres-teoria 1 documentation</title>
    
    <link rel="stylesheet" href="../_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/geotalleres.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootswatch-3.1.0/readable/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-sphinx.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="../_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-3.1.0/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-sphinx.js"></script>
    <link rel="top" title="geotalleres-teoria 1 documentation" href="../index.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">

  </head>
  <body>

  <div id="navbar" class="navbar navbar-default ">
    <div class="container">
      <div class="navbar-header">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="../index.html">
          GeoTalleres</a>
        <span class="navbar-text navbar-version pull-left"><b>1</b></span>
      </div>

        <div class="collapse navbar-collapse nav-collapse">
          <ul class="nav navbar-nav">
            <li class="divider-vertical"></li>
            
            
              <li class="dropdown globaltoc-container">
  <a role="button"
     id="dLabelGlobalToc"
     data-toggle="dropdown"
     data-target="#"
     href="../index.html">Nav <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"
      role="menu"
      aria-labelledby="dLabelGlobalToc"><ul>
<li class="toctree-l1"><a class="reference internal" href="../geopython/index.html">Geoprocesamiento con Python</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../geopython/miniintro_python.html">Mini intro a python</a></li>
<li class="toctree-l2"><a class="reference internal" href="../geopython/librerias.html">Librerías GEO interesantes en Python</a></li>
<li class="toctree-l2"><a class="reference internal" href="../geopython/instalacion.html">Instalación</a></li>
<li class="toctree-l2"><a class="reference internal" href="../geopython/rasterio.html">rasterio</a></li>
<li class="toctree-l2"><a class="reference internal" href="../geopython/fiona.html">fiona</a></li>
<li class="toctree-l2"><a class="reference internal" href="../geopython/shapely.html">shapely</a></li>
<li class="toctree-l2"><a class="reference internal" href="../geopython/fiona_shapely.html">fiona y shapely</a></li>
</ul>
</li>
</ul>
</ul>
</li>
              
                <li class="dropdown">
  <a role="button"
     id="dLabelLocalToc"
     data-toggle="dropdown"
     data-target="#"
     href="#">Page <b class="caret"></b></a>
  <ul class="dropdown-menu localtoc"
      role="menu"
      aria-labelledby="dLabelLocalToc"><ul>
<li><a class="reference internal" href="#">Optimización de GeoTIFF para su publicación</a><ul>
<li><a class="reference internal" href="#gdalinfo">gdalinfo</a></li>
<li><a class="reference internal" href="#gdal-translate">gdal_translate</a></li>
<li><a class="reference internal" href="#gdaladdo">gdaladdo</a></li>
</ul>
</li>
</ul>
</ul>
</li>
              
            
            
              
                
              
            
            
            
            
              <li class="hidden-sm">
<div id="sourcelink">
  <a href="../_sources/optimizacion-raster-gdal/optimizacion-raster-gdal.txt"
     rel="nofollow">Source</a>
</div></li>
            
          </ul>

          
            
<form class="navbar-form navbar-right" action="../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          
        </div>
    </div>
  </div>

<div class="container">
  <div class="row">
    <div class="col-md-12">
      
  <div class="section" id="optimizacion-de-geotiff-para-su-publicacion">
<h1>Optimización de GeoTIFF para su publicación<a class="headerlink" href="#optimizacion-de-geotiff-para-su-publicacion" title="Permalink to this headline">¶</a></h1>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<table border="1" class="docutils">
<colgroup>
<col width="25%" />
<col width="75%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Fecha</th>
<th class="head">Autores</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>1 Diciembre 2012</td>
<td><ul class="first last simple">
<li>Oscar Fonts (<a class="reference external" href="mailto:oscar&#46;fonts&#37;&#52;&#48;geomati&#46;co">oscar<span>&#46;</span>fonts<span>&#64;</span>geomati<span>&#46;</span>co</a>)</li>
</ul>
</td>
</tr>
<tr class="row-odd"><td>24 Junio 2013</td>
<td><ul class="first last simple">
<li>Fernando González (<a class="reference external" href="mailto:fernando&#46;gonzalez&#37;&#52;&#48;fao&#46;org">fernando<span>&#46;</span>gonzalez<span>&#64;</span>fao<span>&#46;</span>org</a>)</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>©2013 FAO Forestry</p>
<p class="last">Excepto donde quede reflejado de otra manera, la presente documentación se halla bajo licencia : Creative Commons (Creative Commons - Attribution - Share Alike: <a class="reference external" href="http://creativecommons.org/licenses/by-sa/3.0/deed.es">http://creativecommons.org/licenses/by-sa/3.0/deed.es</a>)</p>
</div>
<p>Los datos raster generalmente contienen una gran cantidad de información, mucha más de la que se puede mostrar en una pantalla de una sola vez.
Para que GeoServer pueda gestionar esta gran cantidad de datos de forma eficiente en diferentes situaciones, es necesario prestar atención a su optimización.</p>
<p>Imaginemos que queremos mostrar por pantalla una imagen raster de 10.000 x 10.000 píxeles.
Puesto que la resolución de la pantalla es limitada, sólamente será capaz de mostrar,
como máximo, un 1% de los píxeles totales del raster.</p>
<p>En lugar de leer todo el ráster, debemos incorporar mecanismos en que no sea necesario leer completamente todos los datos cada vez que visualizamos el ráster, sino sólamente a la porción de información que podemos visualizar. Esto se hace de dos modos:</p>
<ul class="simple">
<li>En situación de &#8220;zoom in&#8221;, es conveniente poder acceder sólo a la porción de imagen que se va a mostrar, descartando el resto.</li>
<li>En situación de &#8220;zoom out&#8221;, es conveniente disponer de una o varias copias del ráster a resoluciones menores.</li>
</ul>
<p>El formato interno de los ficheros GeoTIFF se puede procesar y prepararlo para estas dos situaciones.</p>
<p>Para ello utilizaremos las librerías GDAL desde la línea de comandos.
En concreto, veremos las utilidades <tt class="docutils literal"><span class="pre">gdalinfo</span></tt>, <tt class="docutils literal"><span class="pre">gdal_translate</span></tt> y  <tt class="docutils literal"><span class="pre">gdaladdo</span></tt>.</p>
<div class="section" id="gdalinfo">
<h2>gdalinfo<a class="headerlink" href="#gdalinfo" title="Permalink to this headline">¶</a></h2>
<p>Proporciona información sobre ficheros ráster.</p>
<ul>
<li><p class="first">Abrir una consola (terminal).</p>
</li>
<li><p class="first">Acceder al directorio que contiene las imágenes landsat:</p>
<div class="highlight-python"><pre>cd pry_workshop_data/raster/landsat/</pre>
</div>
</li>
<li><p class="first">Ejecutar <tt class="docutils literal"><span class="pre">gdalinfo</span></tt> sobre la imagen de 1990:</p>
<div class="highlight-python"><pre>gdalinfo landsat_1990.tif</pre>
</div>
</li>
</ul>
<p>Obtendremos información sobre el tamaño del fichero, el sistema de coordenadas, y la manera en que están codificadas las diferentes bandas internamente.</p>
<p>En concreto, observamos:</p>
<div class="highlight-python"><pre>Band 1 Block=3069x1 Type=Byte, ColorInterp=Red
Band 2 Block=3069x1 Type=Byte, ColorInterp=Green
Band 3 Block=3069x1 Type=Byte, ColorInterp=Blue</pre>
</div>
<p>Esto significa que la imagen está guardada en &#8220;tiras&#8221; de 1px de alto.</p>
</div>
<div class="section" id="gdal-translate">
<h2>gdal_translate<a class="headerlink" href="#gdal-translate" title="Permalink to this headline">¶</a></h2>
<p>Para optimizar el acceso en situaciones de &#8220;zoom in&#8221;, podemos cambiar esta codificación interna
para que almacene la información en bloques cuadrados de 512x512 píxeles. Ejecutar:</p>
<div class="highlight-python"><pre>gdal_translate -co "TILED=YES" -co "BLOCKXSIZE=512" -co "BLOCKYSIZE=512" landsat_1990.tif landsat_1990_tiled.tif</pre>
</div>
<p>Veamos la información en la nueva imagen:</p>
<div class="highlight-python"><pre>gdalinfo landsat_1990_tiled.tif</pre>
</div>
<p>Ahora obtenemos:</p>
<div class="highlight-python"><pre>Band 1 Block=512x512 Type=Byte, ColorInterp=Red
Band 2 Block=512x512 Type=Byte, ColorInterp=Green
Band 3 Block=512x512 Type=Byte, ColorInterp=Blue</pre>
</div>
</div>
<div class="section" id="gdaladdo">
<h2>gdaladdo<a class="headerlink" href="#gdaladdo" title="Permalink to this headline">¶</a></h2>
<p>Para optimizar el acceso en situaciones de &#8220;zoom out&#8221;, podemos añadir, internamente, una serie de imágenes a menor resolución:</p>
<div class="highlight-python"><pre>gdaaddo landsat_1990_tiled.tif 2 4 8</pre>
</div>
<p>Ejecutando de nuevo gdalinfo, observamos que para cada banda aparece esta nueva información:</p>
<div class="highlight-python"><pre>Overviews of mask band: 1535x1535, 768x768, 384x384</pre>
</div>
<p>La ventaja de utilizar la línea de comandos es que se puede crear un <em>script</em>  para automatizar
este procesado y aplicarlo masivamente a un gran conjunto de ficheros siempre que sea necesario.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>Para saber más...</p>
<ul class="last simple">
<li><a class="reference external" href="http://www.gdal.org/gdal_utilities.html">GDAL Utilities</a>.</li>
</ul>
</div>
</div>
</div>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
    </p>
    <p>
        &copy; Copyright 2013, Varios.<br/>
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.3.<br/>
    </p>
  </div>
</footer>
  </body>
</html>