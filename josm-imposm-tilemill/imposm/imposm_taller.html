
<!DOCTYPE html>


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>4. Taller de ImpOSM &mdash; geotalleres-teoria 1 documentation</title>
    
    <link rel="stylesheet" href="../../_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/geotalleres.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/bootswatch-3.1.0/readable/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/bootstrap-sphinx.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <script type="text/javascript" src="../../_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="../../_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="../../_static/bootstrap-3.1.0/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../../_static/bootstrap-sphinx.js"></script>
    <link rel="top" title="geotalleres-teoria 1 documentation" href="../../index.html" />
    <link rel="up" title="Taller de OSM + IMPOSM + TILEMILL VI Jornadas de SIG Libre" href="../index.html" />
    <link rel="next" title="5. Qué es TileMill" href="../tilemill/tilemill_intro.html" />
    <link rel="prev" title="3. Importando OSM a un POSTGIS" href="imposm_intro.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">

  </head>
  <body>

  <div id="navbar" class="navbar navbar-default ">
    <div class="container">
      <div class="navbar-header">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="../../index.html">
          GeoTalleres</a>
        <span class="navbar-text navbar-version pull-left"><b>1</b></span>
      </div>

        <div class="collapse navbar-collapse nav-collapse">
          <ul class="nav navbar-nav">
            <li class="divider-vertical"></li>
            
            
              <li class="dropdown globaltoc-container">
  <a role="button"
     id="dLabelGlobalToc"
     data-toggle="dropdown"
     data-target="#"
     href="../../index.html">Nav <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"
      role="menu"
      aria-labelledby="dLabelGlobalToc"><ul>
<li class="toctree-l1"><a class="reference internal" href="../../virtual-box/virtual-box.html">Instalación de la máquina virtual</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../virtual-box/virtual-box.html#instalacion-de-virtualbox">Instalación de VirtualBox</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../virtual-box/virtual-box.html#creacion-de-una-maquina-virtual">Creación de una máquina virtual</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../virtual-box/virtual-box.html#instalacion-de-ubuntu-linux">Instalación de Ubuntu/Linux</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../servicios-web/servicios-web.html">Servicios web</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../servicios-web/servicios-web.html#http">HTTP</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../servicios-web/servicios-web.html#servicios-del-open-geospatial-consortium-ogc">Servicios del Open Geospatial Consortium (OGC)</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../linux/linux.html">Introducción a Linux</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../geoserver-intro/geoserver_intro.html">Introducción a GeoServer</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../geoserver-intro/geoserver_intro.html#estado-del-servidor">Estado del Servidor</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../geoserver-intro/geoserver_intro.html#logs-de-geoserver">Logs de GeoServer</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../geoserver-intro/geoserver_intro.html#informacion-de-contacto">Información de Contacto</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../geoserver-intro/geoserver_intro.html#acerca-de-geoserver">Acerca de GeoServer</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../geoserver-intro/geoserver_intro.html#gestion-de-usuarios">Gestión de usuarios</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../geoserver-vector/geoserver_vector.html">GeoServer: Publicación de datos vectoriales</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../geoserver-vector/geoserver_vector.html#creacion-de-un-espacio-de-trabajo">Creación de un espacio de trabajo</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../geoserver-vector/geoserver_vector.html#creacion-de-un-almacen-de-datos">Creación de un almacén de datos</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../geoserver-vector/geoserver_vector.html#publicacion-de-capas-vectoriales">Publicación de capas vectoriales</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../geoserver-vector/geoserver_vector.html#previsualizacion-de-capas">Previsualización de capas</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../geoserver-vector/geoserver_vector.html#simbolizacion-de-capas-vectoriales">Simbolización de capas vectoriales</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../geoserver-raster/geoserver_raster.html">GeoServer: Publicación de datos raster</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../geoserver-raster/geoserver_raster.html#almacen-de-datos-geotiff">Almacen de datos GeoTIFF</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../geoserver-raster/geoserver_raster.html#publicacion-de-una-capa-geotiff">Publicación de una capa GeoTIFF</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../geoserver-raster/geoserver_raster.html#simbolizacion-raster">Simbolización Raster</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../geoserver-raster/geoserver_raster.html#publicacion-de-un-mosaico-raster-temporal">Publicación de un mosaico Raster temporal</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../geoserver-raster/geoserver_raster.html#consumo-del-servicio-temporal">Consumo del servicio temporal</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../geoserver-produccion/geoserver_produccion.html">GeoServer en producción</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../geoserver-produccion/geoserver_produccion.html#nivel-de-logging">Nivel de <em>logging</em></a></li>
<li class="toctree-l2"><a class="reference internal" href="../../geoserver-produccion/geoserver_produccion.html#limitacion-del-servicio-wms">Limitación del servicio WMS</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../geowebcache/pregeneracion.html">Pregeneración de teselas en GeoWebCache</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../geowebcache/pregeneracion.html#pregeneracion-de-teselas">Pregeneración de teselas</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../geowebcache/pregeneracion.html#ejemplo-pregeneracion-de-unidades-administrativas-de-ecuador">Ejemplo: pregeneración de unidades administrativas de Ecuador</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../optimizacion-raster-gdal/optimizacion-raster-gdal.html">Optimización de GeoTIFF para su publicación</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../optimizacion-raster-gdal/optimizacion-raster-gdal.html#gdalinfo">gdalinfo</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../optimizacion-raster-gdal/optimizacion-raster-gdal.html#gdal-translate">gdal_translate</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../optimizacion-raster-gdal/optimizacion-raster-gdal.html#gdaladdo">gdaladdo</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../bases-de-datos/teoria_bases_datos.html">Teoría de <strong>base de datos</strong></a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../bases-de-datos/teoria_bases_datos.html#bases-de-datos-el-enfoque-general">Bases de datos, el enfoque general</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../bases-de-datos/teoria_bases_datos.html#tablas-columnas-registros">Tablas, columnas, registros</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../bases-de-datos/teoria_bases_datos.html#modelizacion-de-bd">Modelización de <strong>base de datos</strong></a></li>
<li class="toctree-l2"><a class="reference internal" href="../../bases-de-datos/teoria_bases_datos.html#referencias">Referencias</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../conceptos-sql/conceptos_sql.html">Conceptos básicos de SQL</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../conceptos-sql/conceptos_sql.html#introduccion">Introducción</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../conceptos-sql/conceptos_sql.html#componentes-del-sql">Componentes del SQL</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../conceptos-sql/conceptos_sql.html#consultas">Consultas</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../conceptos-sql/conceptos_sql.html#manejo-de-varias-tablas">Manejo de varias tablas</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../conceptos-sql/conceptos_sql.html#vistas">Vistas</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../conceptos-sql/conceptos_sql.html#referencias">Referencias</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../postgresql/postgresql.html">PostgreSQL</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../postgresql/postgresql.html#introduccion">Introducción</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../postgresql/postgresql.html#arquitectura-cliente-servidor">Arquitectura cliente/servidor</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../postgresql/postgresql.html#creacion-de-una-base-de-datos">Creación de una base de datos</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../postgresql/postgresql.html#acceso-a-una-base-de-datos">Acceso a una base de datos</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../postgresql/postgresql.html#psql">psql</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../postgresql/postgresql.html#consola-psql-interactiva">Consola psql interactiva</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../postgresql/postgresql.html#cargando-informacion-desde-shapefile-shp2pgsql">Cargando información desde shapefile: shp2pgsql</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../postgresql/postgresql.html#mas-informacion">Más información</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../postgresql/postgresql.html#referencias">Referencias</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../postgis-instalacion/instalacion.html">Instalación de <em>PostgreSQL</em></a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../postgis-instalacion/instalacion.html#introduccion-a-postgresql">Introducción a PostgreSQL</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../postgis-instalacion/instalacion.html#instalacion-y-configuracion-de-pg">Instalación y configuración de <em>PostgreSQL</em></a></li>
<li class="toctree-l2"><a class="reference internal" href="../../postgis-instalacion/instalacion.html#configuracion">Configuración</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../postgis-instalacion/instalacion.html#clientes-psql-y-pgadmin3">Clientes: psql y pgadmin3</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../postgis-instalacion/instalacion.html#referencias">Referencias</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../postgis-caracteristicas-espaciales/caracteristicas_espaciales.html"><em>PostGIS</em>, características espaciales</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../postgis-caracteristicas-espaciales/caracteristicas_espaciales.html#introduccion">Introducción</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../postgis-caracteristicas-espaciales/caracteristicas_espaciales.html#instalacion-y-configuracion-de-pg">Instalación y configuración de <em>PostGIS</em></a></li>
<li class="toctree-l2"><a class="reference internal" href="../../postgis-caracteristicas-espaciales/caracteristicas_espaciales.html#indices-espaciales">Indices espaciales</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../postgis-caracteristicas-espaciales/caracteristicas_espaciales.html#funciones-espaciales">Funciones espaciales</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../postgis-caracteristicas-espaciales/caracteristicas_espaciales.html#otros-modulos">Otros módulos</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../postgis-caracteristicas-espaciales/caracteristicas_espaciales.html#practicas">Prácticas</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../postgis-simple-feature-model/simple_feature_model.html">Simple Feature Model</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../postgis-simple-feature-model/simple_feature_model.html#ogc-y-el-simple-feature-model">OGC y el Simple Feature Model</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../postgis-simple-feature-model/simple_feature_model.html#wkt-y-wkb">WKT y WKB</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../postgis-simple-feature-model/simple_feature_model.html#tipos-de-datos-espaciales">Tipos de datos espaciales</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../postgis-simple-feature-model/simple_feature_model.html#definicion-de-geometrias-basicas">Definición de geometrías básicas</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../postgis-simple-feature-model/simple_feature_model.html#referencias">Referencias</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../postgis-importacion-exportacion/importacion_exportacion.html">Importación y exportación de datos</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../postgis-importacion-exportacion/importacion_exportacion.html#importacion-esri-shapes-mediante-shp2pgsql">Importación ESRI shapes mediante shp2pgsql</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../postgis-importacion-exportacion/importacion_exportacion.html#exportacion-desde-pg-a-archivos-de-tipo-esri-shapefile">Exportación desde PostGIS a archivos de tipo ESRI Shapefile</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../postgis-importacion-exportacion/importacion_exportacion.html#gdal-ogr">GDAL/OGR</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../postgis-importacion-exportacion/importacion_exportacion.html#importacion-datos-osm-a-postgis">Importación datos OSM a PostGIS</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../postgis-importacion-exportacion/importacion_exportacion.html#consulta-mediante-visores-web-y-sig-escritorio">Consulta mediante visores web y SIG escritorio</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../postgis-importacion-exportacion/importacion_exportacion.html#referencias">Referencias</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../postgis-indexacion-espacial/indexacion_espacial.html">Indexación espacial</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../postgis-indexacion-espacial/indexacion_espacial.html#como-funcionan-los-indices-espaciales">Como funcionan los índices espaciales</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../postgis-indexacion-espacial/indexacion_espacial.html#creacion-de-indices-espaciales">Creación de indices espaciales</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../postgis-indexacion-espacial/indexacion_espacial.html#uso-de-indices-espaciales">Uso de índices espaciales</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../postgis-indexacion-espacial/indexacion_espacial.html#analyze-y-vacuum">ANALYZE y VACUUM</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../postgis-indexacion-espacial/indexacion_espacial.html#practicas">Prácticas</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../postgis-relaciones-espaciales/relaciones_espaciales.html">Relaciones espaciales</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../postgis-relaciones-espaciales/relaciones_espaciales.html#introduccion">Introducción</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../postgis-relaciones-espaciales/relaciones_espaciales.html#matriz-de-9im">Matriz DE-9IM</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../postgis-relaciones-espaciales/relaciones_espaciales.html#predicados-espaciales">Predicados espaciales</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../postgis-relaciones-espaciales/relaciones_espaciales.html#joins-espaciales">JOINS espaciales</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../postgis-relaciones-espaciales/relaciones_espaciales.html#practicas">Prácticas</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../postgis-analisis-espacial/analisis_espacial.html">Análisis espacial</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../postgis-analisis-espacial/analisis_espacial.html#operadores-espaciales">Operadores espaciales</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../postgis-analisis-espacial/analisis_espacial.html#transformacion-y-edicion-de-coordenadas">Transformación y edición de coordenadas</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../postgis-validacion/validacion.html">Validación</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../postgis-validacion/validacion.html#validar-geometrias">Validar geometrías</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../postgis-raster/postgis_raster.html"><em>PostGIS Raster</em></a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../postgis-raster/postgis_raster.html#introduccion">Introducción</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../postgis-raster/postgis_raster.html#tipo-de-datos-raster">Tipo de datos Raster</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../postgis-raster/postgis_raster.html#procesando-y-cargando-raster-con-gdal-vrt">Procesando y cargando raster con GDAL VRT</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../postgis-raster/postgis_raster.html#obtencion-de-metadatos-y-estadisticas-de-una-capa-pr">Obtención de metadatos y estadísticas de una capa <em>PostGIS Raster</em></a></li>
<li class="toctree-l2"><a class="reference internal" href="../../postgis-raster/postgis_raster.html#mapalgebra-sobre-capas-pr">MapAlgebra sobre capas <em>PostGIS Raster</em></a></li>
<li class="toctree-l2"><a class="reference internal" href="../../postgis-raster/postgis_raster.html#clip-de-datos-raster-usando-geometrias">Clip de datos ráster usando geometrías</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../postgis-raster/postgis_raster.html#combinando-raster-y-geometrias-para-analisis-espacial">Combinando raster y geometrías para análisis espacial</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../postgis-cartodb/cartodb.html">Productos basados en PostGIS: CartoDB, OpenGeo</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../postgis-cartodb/cartodb.html#cartodb">CartoDB</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../postgis-cartodb/cartodb.html#opengeo">OpenGEO</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../mapproxy/doc/source/index.html">Taller de MapProxy</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../mapproxy/doc/source/presentacion.html">Presentación</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../mapproxy/doc/source/instalacion-configuracion.html">Instalación de MapProxy</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../mapproxy/doc/source/elarchivodeconfiguracion.html">El archivo de configuración mappproxy.yaml</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../mapproxy/doc/source/elarchivodeseeding.html">El archivo de configuración seed.yaml</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../mapproxy/doc/source/ejercicios/index.html">Ejercicios</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../mapproxy/doc/source/referencias.html">Referencias</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../index.html">Taller de OSM + IMPOSM + TILEMILL  VI Jornadas de SIG Libre</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../index.html#autores-del-taller">Autores del taller</a></li>
<li class="toctree-l2"><a class="reference internal" href="../index.html#licencia">Licencia</a></li>
<li class="toctree-l2"><a class="reference internal" href="../index.html#agenda">Agenda</a></li>
</ul>
</li>
</ul>
</ul>
</li>
              
                <li class="dropdown">
  <a role="button"
     id="dLabelLocalToc"
     data-toggle="dropdown"
     data-target="#"
     href="#">Page <b class="caret"></b></a>
  <ul class="dropdown-menu localtoc"
      role="menu"
      aria-labelledby="dLabelLocalToc"><ul>
<li><a class="reference internal" href="#">4. Taller de ImpOSM</a><ul>
<li><a class="reference internal" href="#preparando-el-juego-de-datos">4.1. Preparando el juego de datos</a></li>
<li><a class="reference internal" href="#preparando-la-base-de-datos">4.2. Preparando la base de datos</a></li>
<li><a class="reference internal" href="#primera-importacion">4.3. Primera importación</a><ul>
<li><a class="reference internal" href="#lectura">4.3.1. Lectura</a></li>
<li><a class="reference internal" href="#escritura">4.3.2. Escritura</a></li>
<li><a class="reference internal" href="#optimizacion">4.3.3. Optimización</a></li>
<li><a class="reference internal" href="#todo-en-un-paso">4.3.4. Todo en un paso</a></li>
</ul>
</li>
<li><a class="reference internal" href="#flujo-de-trabajo">4.4. Flujo de trabajo</a></li>
<li><a class="reference internal" href="#modificando-el-mapping">4.5. Modificando el mapping</a></li>
<li><a class="reference internal" href="#ejercicio">4.6. Ejercicio</a></li>
</ul>
</li>
</ul>
</ul>
</li>
              
            
            
              
                
  <li>
    <a href="imposm_intro.html" title="Previous Chapter: 3. Importando OSM a un POSTGIS"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm">&laquo; 3. Importando OS...</span>
    </a>
  </li>
  <li>
    <a href="../tilemill/tilemill_intro.html" title="Next Chapter: 5. Qué es TileMill"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm">5. Qué es TileMi... &raquo;</span>
    </a>
  </li>
              
            
            
            
            
              <li class="hidden-sm">
<div id="sourcelink">
  <a href="../../_sources/josm-imposm-tilemill/imposm/imposm_taller.txt"
     rel="nofollow">Source</a>
</div></li>
            
          </ul>

          
            
<form class="navbar-form navbar-right" action="../../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          
        </div>
    </div>
  </div>

<div class="container">
  <div class="row">
    <div class="col-md-12">
      
  <div class="section" id="taller-de-imposm">
<span id="tallerimposm"></span><h1>4. Taller de ImpOSM<a class="headerlink" href="#taller-de-imposm" title="Permalink to this headline">¶</a></h1>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>Autores:</p>
<ul class="simple">
<li>Pedro-Juan Ferrer <a class="reference external" href="http://twitter.com/vehrka">&#64;vehrka</a> · <a class="reference external" href="mailto:pferrer&#37;&#52;&#48;osgeo&#46;org">pferrer<span>&#64;</span>osgeo<span>&#46;</span>org</a></li>
<li>Iván Sanchez <a class="reference external" href="http://twitter.com/realivansanchez">&#64;realivansanchez</a> · <a class="reference external" href="mailto:ivan&#37;&#52;&#48;sanchezortega&#46;es">ivan<span>&#64;</span>sanchezortega<span>&#46;</span>es</a></li>
<li>Santiago Tramoyeres <a class="reference external" href="http://twitter.com/santracraus">&#64;santracraus</a></li>
</ul>
<p>Licencia:</p>
<p class="last">Excepto donde quede reflejado de otra manera, la presente documentación
se halla bajo licencia <a class="reference external" href="https://creativecommons.org/licenses/by-sa/4.0/deed.es_ES">Creative Commons Reconocimiento Compartir Igual</a></p>
</div>
<p>A continuación se detalla una práctica guiada en la que se verán los detalles básicos del manejo de la aplicación ImpOSM.</p>
<p>Se espera del lector que vaya ejecutando las instrucciones que se detallan a continuación y en caso de duda pregunte al facilitador.</p>
<div class="section" id="preparando-el-juego-de-datos">
<h2>4.1. Preparando el juego de datos<a class="headerlink" href="#preparando-el-juego-de-datos" title="Permalink to this headline">¶</a></h2>
<p>Para trabajar con los datos primero crearemos una carpeta con la copia del juego de datos del taller.</p>
<p>Abrimos una terminal y cambiamos al directorio tecleando</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span><span class="nb">cd</span> /home/jornadas/taller_osm_tilemill/
</pre></div>
</div>
<p>Creamos un nuevo directorio y accedemos a el</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>mkdir tallerimposm
<span class="nv">$ </span><span class="nb">cd </span>tallerimposm
</pre></div>
</div>
<p>y copiamos los datos al directorio</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>cp ../../datos/UniversitatGirona.osm .
</pre></div>
</div>
<p>Este juego de datos es una copia de la zona que trabajamos en el taller anterior.</p>
</div>
<div class="section" id="preparando-la-base-de-datos">
<h2>4.2. Preparando la base de datos<a class="headerlink" href="#preparando-la-base-de-datos" title="Permalink to this headline">¶</a></h2>
<p>El primer paso para la carga de datos es la creación de la base de datos que se hace utilizando el comando <tt class="docutils literal"><span class="pre">imposm-psqldb</span></tt>, este comando nos devuelve una estructura de datos para la base de datos PostGIS, lo mejor es asignar una salida directa del comando a un archivo de texto.</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>imposm-psqldb &gt; create-db.sh
</pre></div>
</div>
<p>A continuación editamos el archivo <em>create-db.sh</em> para comprobar si las rutas a los scripts de PostGIS y al archibo <em>pg_hba.conf</em> son correctas.</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>gedit create-db.sh
</pre></div>
</div>
<p>En una instalación estándar de Ubuntu estos archivos se encuentran en:</p>
<blockquote>
<div><p>/usr/share/postgresql/8.4/contrib/postgis-1.5/postgis.sql</p>
<p>/usr/share/postgresql/8.4/contrib/postgis-1.5/spatial_ref_sys.sql</p>
<p>/etc/postgresql/8.4/main/pg_hba.conf</p>
</div></blockquote>
<p>Guardamos el archivo con  y salimos de <cite>gedit</cite>.</p>
<p>A continuación ejecutamos el script <em>crate-db.sh</em>, pero hay que hacerlo como usuario postgres por lo  que teclearemos las instrucciones siguientes:</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>sudo su postgres
<span class="nv">$ </span>bash create-db.sh
<span class="nv">$ </span><span class="nb">exit</span>
<span class="nv">$ </span>sudo service postgresql restart
</pre></div>
</div>
<p>A partir de este momento contamos con una base de datos PostgresSQL con la extensión PostGIS llamada <strong>osm</strong> y que tiene un usuario que se llama <strong>osm</strong> y cuya contraseña es <strong>osm</strong>.</p>
</div>
<div class="section" id="primera-importacion">
<h2>4.3. Primera importación<a class="headerlink" href="#primera-importacion" title="Permalink to this headline">¶</a></h2>
<p>Podemos proceder a la primera importación de datos que realizaremos haciendo los tres pasos por separado:</p>
<ul class="simple">
<li>Lectura</li>
<li>Escritura</li>
<li>Optimización</li>
</ul>
<div class="section" id="lectura">
<h3>4.3.1. Lectura<a class="headerlink" href="#lectura" title="Permalink to this headline">¶</a></h3>
<p>Se realiza empleando el comando:</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>imposm --read UniversitatGirona.osm
</pre></div>
</div>
<p>Como la cantidad de datos no es muy grande, solo tardará unos segundos.</p>
<p>Una vez acaba podemos comprobar que ha creado los archivos de cache listando los archivos del directorio:</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>ls

create-db.sh  imposm_coords.cache  imposm_nodes.cache  imposm_relations.cache  imposm_ways.cache  UniversitatGirona.osm
</pre></div>
</div>
<p>ImpOSM ha generado los archivos <em>.cache</em> que son archivos binarios con los datos preparados para ser incluidos en la base de datos.</p>
</div>
<div class="section" id="escritura">
<h3>4.3.2. Escritura<a class="headerlink" href="#escritura" title="Permalink to this headline">¶</a></h3>
<p>Se realiza empleando el comando:</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>imposm --write --database osm --host localhost --user osm
</pre></div>
</div>
<p>Solicitará la constraseña del usuario osm y cargará los datos que hay en los archivos <em>.cache</em>.</p>
<p>Podemos investigar qué ha hecho ImpOSM lanzando la aplicación pgAdmin III que está instalada en la máquina virtual en el menú <tt class="docutils literal"><span class="pre">Development</span></tt>. Podemos comprobar que ha creado 24 tablas nuevas, todas con el sufijo <tt class="docutils literal"><span class="pre">new_</span></tt></p>
<img alt="Tablas cargadas por ImpOSM" class="align-center" src="../../_images/pgAdminImport.png" style="width: 600px;" />
<p>El esquema de tablas y qué etiquetas ha importado son los estándar ya que aún no hemos cambiado los <cite>mappings</cite>. En concreto podremos encontrar:</p>
<ul class="simple">
<li>Amenities</li>
<li>Places</li>
<li>Transport_points</li>
<li>Administrative polygons</li>
<li>Buildings</li>
<li>Landusages</li>
<li>Aeroways</li>
<li>Waterareas</li>
<li>Roads (en realidad repartidas en varias tablas en función de la categoría)</li>
<li>Railways</li>
<li>Waterways</li>
</ul>
<p>También vienen unas tablas con geometrías de las vías de transporte generalizadas en función de dos tolerancias y unas vistas que agrupan todas las carreteras.</p>
</div>
<div class="section" id="optimizacion">
<h3>4.3.3. Optimización<a class="headerlink" href="#optimizacion" title="Permalink to this headline">¶</a></h3>
<p>El último paso de la carga de datos sería la optimización de los datos que se realiza empleando el comando:</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>imposm --optimize -d osm
</pre></div>
</div>
</div>
<div class="section" id="todo-en-un-paso">
<h3>4.3.4. Todo en un paso<a class="headerlink" href="#todo-en-un-paso" title="Permalink to this headline">¶</a></h3>
<p>En realidad los tres pasos anteriores se pueden ejecutar en un solo comando:</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>imposm --read --write --optimize -d osm UniversitatGirona.osm
</pre></div>
</div>
</div>
</div>
<div class="section" id="flujo-de-trabajo">
<h2>4.4. Flujo de trabajo<a class="headerlink" href="#flujo-de-trabajo" title="Permalink to this headline">¶</a></h2>
<p>El flujo de trabajo recomendado permite el despliegue de las tablas conservando hasta 3 versiones a la vez del mismo juego de datos. El despliegue se inicia al ejecutar el comando:</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>imposm -d osm --deploy-production-tables
</pre></div>
</div>
<p>Podremos comprobar con pgAdmin III como se ha cambiado el nombre de todas las tablas perdiendo el prefijo <strong>new_</strong>.</p>
<p>Cuando se suban unas nuevas tablas y se deplieguen, las tablas que no tengan prefijo pasarán a tener el prefijo <strong>old_</strong>.</p>
<p>Y para borrar <em>definitivamente</em> las tablas marcadas con <strong>old_</strong> y las marcadas con <strong>new_</strong> se emplea el comando:</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>imposm -d osm --remove-backup-tables
</pre></div>
</div>
</div>
<div class="section" id="modificando-el-mapping">
<h2>4.5. Modificando el mapping<a class="headerlink" href="#modificando-el-mapping" title="Permalink to this headline">¶</a></h2>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Para resolver esta parte te recomendamos volver a mirar el punto <a class="reference internal" href="imposm_intro.html#cambiaesqdef"><em>Cambiando el esquema por defecto</em></a> tratada en el bloque anterior</p>
</div>
<p>ImpOSM trae un esquema de datos por defecto que separa los fenómenos en varias tablas en función de algunas de las etiquetas más usadas de OSM, sin embargo el esquema es generalmente insuficiente ya que se suele emplear un abanico de datos mucho más ámplio.</p>
<p>Por ejemplo, en nuestro caso no se está incluyendo en la base de datos ningún registro de los siguientes tipos y subtipos:</p>
<ul class="simple">
<li>Amenity<ul>
<li>restaurant</li>
<li>pub</li>
<li>cafe</li>
<li>place of worship</li>
<li>parking</li>
</ul>
</li>
<li>Natural</li>
<li>Tourism</li>
<li>Barrier</li>
</ul>
<p>Por lo que debemos modificar el archivo de <cite>mapping</cite> para que los incluya. El archivo <cite>mapping</cite> se encuentra en la siguiente localización:</p>
<blockquote>
<div>/usr/local/lib/python2.7/dist-packages/imposm/defaultmapping.py</div></blockquote>
<p>lo copiamos y editamos empleando los siguientes comandos:</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>cp /usr/local/lib/python2.7/dist-packages/imposm/defaultmapping.py mappingudg.py
<span class="nv">$ </span>gedit mappingudg.py
</pre></div>
</div>
<p>Buscamos la cadena <tt class="docutils literal"><span class="pre">amenities</span> <span class="pre">=</span> <span class="pre">Points</span></tt> usando el comando buscar de <cite>gedit</cite> al que se llama con la combinación de teclas <cite>Ctrl + F</cite>.</p>
<img alt="Tablas cargadas por ImpOSM" class="align-center" src="../../_images/imposmnanoamenities.png" style="width: 600px;" />
<p>Como podemos ver, ImpOSM por defecto tiene determinados tipos de Amenity cuando son puntos pero no tiene ninguno de los indicados en la lista referida un par de párrafos más arriba.</p>
<p>Vamos a añadir al argumento <cite>mapping</cite> los elementos que le faltan (no importa el orden) respetando la sintaxis de tuplas de Python de forma que quede de la siguiente manera:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">amenities</span> <span class="o">=</span> <span class="n">Points</span><span class="p">(</span>
    <span class="n">name</span><span class="o">=</span><span class="s">&#39;amenities&#39;</span><span class="p">,</span>
    <span class="n">mapping</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s">&#39;amenity&#39;</span><span class="p">:</span> <span class="p">(</span>
            <span class="s">&#39;university&#39;</span><span class="p">,</span>
            <span class="s">&#39;school&#39;</span><span class="p">,</span>
            <span class="s">&#39;library&#39;</span><span class="p">,</span>
            <span class="s">&#39;fuel&#39;</span><span class="p">,</span>
            <span class="s">&#39;hospital&#39;</span><span class="p">,</span>
            <span class="s">&#39;fire_station&#39;</span><span class="p">,</span>
            <span class="s">&#39;police&#39;</span><span class="p">,</span>
            <span class="s">&#39;townhall&#39;</span><span class="p">,</span>
            <span class="s">&#39;restaurant&#39;</span><span class="p">,</span>
            <span class="s">&#39;pub&#39;</span><span class="p">,</span>
            <span class="s">&#39;cafe&#39;</span><span class="p">,</span>
            <span class="s">&#39;place_of_worship&#39;</span><span class="p">,</span>
            <span class="s">&#39;parking&#39;</span><span class="p">,</span>
        <span class="p">),</span>
<span class="p">})</span>
</pre></div>
</div>
<p>El caso de los árboles (<em>natural/tree</em>) es distinto ya que por defecto ImpOSM no incluye un <cite>mapping</cite> para la clave <cite>Natural</cite>, por lo que la crearemos desde cero, justo debajo del objeto <cite>amenities</cite> vamos a crear un nuevo objeto para poder importarlos.</p>
<p>Si observamos el juego de datos usando JOSM veremos que los árboles tiene además del par clave/valor que los define, algunos pares de claves/valor más, de todos ellos solo nos interesa el campo <cite>type</cite> pero en caso de existir ese campo lo crea por defecto ImpOSM por lo que no es necesario escribirlo explícitamente en la definición:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">arboles</span> <span class="o">=</span> <span class="n">Points</span><span class="p">(</span>
    <span class="n">name</span> <span class="o">=</span> <span class="s">&#39;arboles&#39;</span><span class="p">,</span>
    <span class="n">mapping</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s">&#39;natural&#39;</span><span class="p">:</span> <span class="p">(</span>
            <span class="s">&#39;tree&#39;</span><span class="p">,</span>
        <span class="p">),</span>
    <span class="p">},</span>
<span class="p">)</span>
</pre></div>
</div>
<p>Guardamos el archivo con y salimos de <cite>gedit</cite>.</p>
<p>Ejecutamos el comando para escribir y optimizar los datos en la base de datos:</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>imposm --read UniversitatGirona.osm --write --database osm --host localhost --user osm --optimize --overwrite-cache --deploy-production-tables -m mappingudg.py
</pre></div>
</div>
<p>En este caso es necesario volver a leer los datos y generar los archivos de cache, ya que hemos modificado la estructura de los datos. Con la opción <cite>&#8211;overwrite-cache</cite> se sobrescribirán directamente los archivos necesarios.</p>
</div>
<div class="section" id="ejercicio">
<h2>4.6. Ejercicio<a class="headerlink" href="#ejercicio" title="Permalink to this headline">¶</a></h2>
<p>Como ejercicio del taller se propone crear el <cite>mapping</cite> para las claves de OSM <em>Tourism</em> y <em>Barrier</em>, escribir los datos en la base de datos y desplegar las tablas.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>En el directorio <strong>datos</strong> puedes encontrar el archivo <tt class="docutils literal"><span class="pre">mappinngudg.py</span></tt> que ya tiene las modificaciones necesarias, en el caso qse que no te de tiempo a realizarlas en el taller puedes usar el siguiente comando:</p>
<div class="last highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>imposm --read UniversitatGirona.osm --write --database osm --host localhost --user osm --optimize --overwrite-cache --deploy-production-tables -m datos/mappingudg.py
</pre></div>
</div>
</div>
</div>
</div>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
    </p>
    <p>
        &copy; Copyright 2013, Varios.<br/>
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.3.<br/>
    </p>
  </div>
</footer>
  </body>
</html>